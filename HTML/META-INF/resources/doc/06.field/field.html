<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>フィールドとバリデータ</title>
		<link type="text/css" href="../css/document.css" rel="stylesheet" />
	</head>
	<body>
		<h1><span>7.</span>フィールドとバリデータ</h1>
		<p>
			フィールドクラスはデータベースアクセス用のテーブルや問合せクラスに配置され、データベースの保存するデータの型を決定します。
			また、フォームクラスにも配置し、HTMLの&lt;input ...&gt;や&lt;select ...&gt;...&lt;/select&gt;などのページ中の入力フィールドに対応します。
		</p>
		<p>
			フィールドクラスの主な役割はバリデーションとデータ変換になります。
			整数を入力しデータベースに保存する場合、フォームに入力された"123"という文字列を整数として成立する文字列かどうかをチェックし(バリデーション)、
			問題になければ整数に変換してデータベースに保存するというステップが必要になります。
			このようなコードはそれほど難しいものではないのですが、フィールドごとに記述すると大量のコードになりBUGの温床になります。
			dataforms2.jarではIntegerFieldをフォームとテーブルに配置するだけで、このような処理が自動的に動作するようになっています。
		</p>
		<p>
			また、Javaのフィールドクラスに対応するJavascriptクラスを作成することによって、特殊な入力補助機能を実装することが可能です。
		</p>
		<h2>SQLのデータ型に対応したフィールド</h2>
		<p>

		</p>
		<table>
			<caption>
				SQLのデータ型に対応したフィールドの一覧
			</caption>
			<thead>
				<tr>
					<th style="width:40px;">No.</th><th style="width:200px;">クラス名</th><th style="width:100px;">Java型<br/>SQL型</th><th style="width:300px;">対応するHTML TAG</th><th style="width: 300px;">用途</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td style="text-align: right;">1</td><td>CharField</td><td>java.lang.String<br/>char</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>固定長文字列の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">2</td><td>VarcharField</td><td>java.lang.String<br/>varchar</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>可変長文字列の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">3</td><td>ClobField</td><td>java.lang.String<br/>clob</td><td>&lt;textarea ...&gt;...&lt;/textarea&gt;</td><td>テキストの入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">4</td><td>SmallintField</td><td>java.lang.Short<br/>smallint</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>2バイト整数の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">5</td><td>IntegerField</td><td>java.lang.Integer<br/>integer</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>4バイト整数の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">6</td><td>BigintField</td><td>java.lang.Long<br/>bigint</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>8バイト整数の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">7</td><td>DoubleField</td><td>java.lang.Double<br/>double</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>実数の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">8</td><td>NumericField</td><td>java.math.BigDecimal<br/>numeric</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>数値の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">9</td><td>DateField</td><td>java.sql.Date<br/>date</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>日付の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">10</td><td>TimeField</td><td>java.sql.Time<br/>time</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>時刻の入力</td>
				</tr>
				<tr>
					<td style="text-align: right;">11</td><td>TimestampField</td><td>java.sql.Timestamp<br/>timestamp</td><td>&lt;input type=&quot;text&quot; ...&gt;</td><td>日付時刻の入力</td>
				</tr>
			</tbody>
		</table>

		<h2>選択フィールド</h2>
		<p>

		</p>
		<table>
			<caption>
				フィールド一覧
			</caption>
			<thead>
				<tr>
					<th style="width:40px;">No.</th><th style="width:200px;">クラス名</th><th style="width:100px;">Java型<br/>SQL型</th><th style="width:300px;">対応するHTML TAG</th><th style="width: 300px;">用途</th>
				</tr>
			</thead>
			<tbody>
					<td style="text-align: right;">1</td>
					<td>BigintSingleSelectField</td>
					<td>java.lang.Long<br/>igint</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>8バイト整数の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">2</td>
					<td>CharSingleSelectField</td>
					<td>java.lang.Long<br/>char</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>文字列の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">3</td>
					<td>IntegerSingleSelectField</td>
					<td>java.lang.Integer<br/>integer</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>4バイト整数の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">4</td>
					<td>SmallintSingleSelectField</td>
					<td>java.lang.Short<br/>smallint</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>2バイト整数の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">5</td>
					<td>VarcharSingleSelectField</td>
					<td>java.lang.String<br/>varchar</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>可変長文字列の選択</td>
				</tr>
				<!--  -->
				<tr>
					<td style="text-align: right;">6</td>
					<td>MasterSingleSelectField</td>
					<td>java.lang.Long<br/>bigint</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>8バイト整数の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">7</td>
					<td>EnumOptionSingleSelectField</td>
					<td>java.lang.String<br/>varchar</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>可変長文字列の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">8</td>
					<td>EnumTypeSingleSelectField</td>
					<td>java.lang.String<br/>varchar</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>可変長文字列の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">9</td>
					<td>PropertiesSingleSelectField</td>
					<td>java.lang.String<br/>varchar</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>可変長文字列の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">10</td>
					<td>PresenceField</td>
					<td>java.lang.String<br/>varchar</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>可変長文字列の選択</td>
				</tr>
				<tr>
					<td style="text-align: right;">11</td>
					<td>LangCodeField</td>
					<td>java.lang.String<br/>varchar</td>
					<td>&lt;input type=&quot;radio&quot; ...&gt;<br/>&lt;select&gt;...&lt;/select&gt;</td>
					<td>可変長文字列の選択</td>
				</tr>
			</tbody>
		</table>
		<h2>複数選択フィールド</h2>
		<table>
			<caption>
				フィールド一覧
			</caption>
			<thead>
				<tr>
					<th style="width:40px;">No.</th><th>クラス名</th><th>データ型<br/>(Java型/SQL型)</th><th>対応するHTML TAG</th><th style="width: 300px;">用途</th>
				</tr>
			</thead>
			<tbody>
				<!--  -->
				<tr>
					<td style="text-align: right;">23</td>
					<td rowspan="5">
						dataforms.field.common<br/>
						(特殊複数選択フィールド)
					</td>
					<td>MasterMultiSelectField</td>
					<td>テキスト(clob)にJson形式で保存</td>
					<td>&lt;input type=&quot;checkbox&quot; ...&gt;<br/>&lt;select ... multiple&gt;...&lt;/select&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">23</td>
					<td>EnumOptionMultiSelectField</td>
					<td>テキスト(clob)にJson形式で保存</td>
					<td>&lt;input type=&quot;checkbox&quot; ...&gt;<br/>&lt;select ... multiple&gt;...&lt;/select&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">23</td>
					<td>PropertiesMultiSelectField</td>
					<td>テキスト(clob)にJson形式で保存</td>
					<td>&lt;input type=&quot;checkbox&quot; ...&gt;<br/>&lt;select ... multiple&gt;...&lt;/select&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">23</td>
					<td>PresenceMultiSelectField</td>
					<td>テキスト(clob)にJson形式で保存</td>
					<td>&lt;input type=&quot;checkbox&quot; ...&gt;<br/>&lt;select ... multiple&gt;...&lt;/select&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">23</td>
					<td>FlagMultiSelectField</td>
					<td>テキスト(clob)にJson形式で保存</td>
					<td>&lt;input type=&quot;checkbox&quot; ...&gt;<br/>&lt;select ... multiple&gt;...&lt;/select&gt;</td>
				</tr>
				<!--  -->
				<tr>
					<td style="text-align: right;">24</td>
					<td rowspan="4">
						dataforms.field.common<br/>
						(blobに保存する各種ファイルフィールド)
					</td>
					<td>BlobStoreAudioField</td>
					<td>バイナリオブジェクト(BLOB)</td>
					<td>&lt;input type=&quot;file&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">25</td>
					<td>BlobStoreFileField</td>
					<td>バイナリオブジェクト(BLOB)</td>
					<td>&lt;input type=&quot;file&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">26</td>
					<td>BlobStoreImageField</td>
					<td>バイナリオブジェクト(BLOB)</td>
					<td>&lt;input type=&quot;file&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">27</td>
					<td>BlobStoreVideoField</td>
					<td>バイナリオブジェクト(BLOB)</td>
					<td>&lt;input type=&quot;file&quot; ...&gt;</td>
				</tr>
				<!--  -->
				<tr>
					<td style="text-align: right;">28</td>
					<td rowspan="4">
						dataforms.field.common<br/>
						(フォルダに保存する各種ファイルフィールド)
					</td>
					<td>FolderStoreAudioField</td>
					<td>可変長文字列(varchar)にファイルのパスを記録</td>
					<td>&lt;input type=&quot;file&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">29</td>
					<td>FolderStoreFileField</td>
					<td>可変長文字列(varchar)にファイルのパスを記録</td>
					<td>&lt;input type=&quot;file&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">30</td>
					<td>FolderStoreImageField</td>
					<td>可変長文字列(varchar)にファイルのパスを記録</td>
					<td>&lt;input type=&quot;file&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">31</td>
					<td>FolderStoreVideoField</td>
					<td>可変長文字列(varchar)にファイルのパスを記録</td>
					<td>&lt;input type=&quot;file&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">32</td>
					<td rowspan="7">
						dataforms.field.common<br/>
					</td>
					<td>WebResourceImageField</td>
					<td>-</td>
					<td>&lt;div ... &gt;&lt;/div&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">33</td>
					<td>FlagField</td>
					<td>文字(char)</td>
					<td>&lt;input type=&quot;checkbox&quot; /&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">34</td>
					<td>FolderField</td>
					<td>可変長文字列(varchar)</td>
					<td>&lt;input type=&quot;text&quot; /&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">35</td>
					<td>ExistingFolderField</td>
					<td>可変長文字列(varchar)</td>
					<td>&lt;input type=&quot;text&quot; /&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">36</td>
					<td>MemoField</td>
					<td>可変長文字列(varchar)</td>
					<td>&lt;input type=&quot;text&quot; /&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">37</td>
					<td>ZipCodeField</td>
					<td>可変長文字列(varchar)</td>
					<td>&lt;input type=&quot;text&quot; /&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">38</td>
					<td>RowNoField</td>
					<td>可変長文字列(varchar)</td>
					<td>&lt;input type=&quot;text&quot; /&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">39</td>
					<td rowspan="7">
						dataforms.field.common<br/>
					</td>
					<td>DeleteFlagField</td>
					<td>文字(char)</td>
					<td>&lt;input type=&quot;hidden&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">40</td>
					<td>RecordIdField</td>
					<td>8バイト整数(bigint)</td>
					<td>&lt;input type=&quot;hidden&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">41</td>
					<td>SortOrderField</td>
					<td>2バイト整数(smallint)</td>
					<td>&lt;input type=&quot;hidden&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">42</td>
					<td>CreateTimestampField</td>
					<td>日付時刻(timestamp)</td>
					<td>&lt;input type=&quot;hidden&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">43</td>
					<td>CreateUserIdField</td>
					<td>8バイト整数(bigint)</td>
					<td>&lt;input type=&quot;hidden&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">44</td>
					<td>UpdateTimestampField</td>
					<td>日付時刻(timestamp)</td>
					<td>&lt;input type=&quot;hidden&quot; ...&gt;</td>
				</tr>
				<tr>
					<td style="text-align: right;">45</td>
					<td>UpdateUserIdField</td>
					<td>8バイト整数(bigint)</td>
					<td>&lt;input type=&quot;hidden&quot; ...&gt;</td>
				</tr>
				<!--  -->
				<tr>
					<td style="text-align: right;">46</td>
					<td rowspan="7">
						dataforms.field.sqlfun<br/>
						(SQL特殊機能フィールド<br/>問合せクラスにのみ配置できます)
					</td>
					<td>AliasField</td>
					<td colspan="2">
						カラムの別名を指定するためのフィールドクラス
					</td>
				</tr>
				<tr>
					<td style="text-align: right;">47</td>
					<td>AvgField</td>
					<td colspan="2">
						平均値を求めるための集計フィールドクラス
					</td>
				</tr>
				<tr>
					<td style="text-align: right;">48</td>
					<td>CountField</td>
					<td colspan="2">
						個数を求めるための集計フィールドクラス
					</td>
				</tr>
				<tr>
					<td style="text-align: right;">49</td>
					<td>MaxField</td>
					<td colspan="2">
						最大値を求めるための集計フィールドクラス
					</td>
				</tr>
				<tr>
					<td style="text-align: right;">50</td>
					<td>MinField</td>
					<td colspan="2">
						最小値を求めるための集計フィールドクラス
					</td>
				</tr>
				<tr>
					<td style="text-align: right;">51</td>
					<td>SqlField</td>
					<td colspan="2">
						SQLの任意の式フィールドクラス
					</td>
				</tr>
				<tr>
					<td style="text-align: right;">52</td>
					<td>SumField</td>
					<td colspan="2">
						合計値を求めるための集計フィールドクラス
					</td>
				</tr>
			</tbody>
		</table>
	</body>
</html>